<div id="messages">
  <!-- User Message -->
  <div class="message user">
    <input type="hidden" id="partition_id" name="partition_id" value="{{ partition_id }}">
    
    <div class="message-icon">
      <img src="/static/icons8-user.svg" alt="bot" class="bot-icon">
    </div>
    <div class="message-content">
      <p>{{ question }}</p>
    </div>
  </div>

  <!-- AI Message -->
  <div class="message ai">
    <div class="message-icon">
      <img src="/static/bot.png" alt="bot" class="bot-icon">
    </div>
    <div class="message-content" style="display: flex;">
      <p id="answer" class="ellipsis">{{ answer }}</p>
      <button id="toggleButton" onclick="toggleText()"></button>  
    </div>
  </div>

<<<<<<< HEAD
  <!-- Evaluation Form -->
  <div class="evaluation-form">
    <form hx-get="/evaluate_response" hx-trigger="submit">
      <label for="evaluation">Was the response helpful?</label>
      <select id="evaluation" class="form-control" name="evaluation">
        <option value="True" {% if evaluation == "True" %}selected{% endif %}>Yes</option>
        <option value="False" {% if evaluation == "False" %}selected{% endif %}>No</option>
      </select>
      <input type="hidden" name="partition_id" value="{{ partition_id }}">
      <button type="submit" class="submit-button">Submit</button>
    </form>
  </div>
=======
  
>>>>>>> 920b59ce2e8fef0c8c0a4cd9b6029e60bcfc2f7c

  <div class="timestamp">{{ timestamp }}</div>
</div>

<style>
  .ellipsis {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      display: block;
      width: 300px; /* Adjust width */
  }
  #toggleButton {
      background-color: transparent;
      border: none;
      color: blue;
      text-decoration: antiquewhite;
      cursor: pointer;
  }

  .expanded {
      white-space: normal;
      overflow: visible;
      text-overflow: unset;
  }
</style>

<script>
  document.getElementById("messages").addEventListener("htmx:afterSwap", function(event) {
    const updatedText = this.textContent;
    
    console.log("New message:", updatedText);
    
   
  });
  function toggleText() {
      let answer = document.getElementById("answer");
      let button = document.getElementById("toggleButton");

      if (answer.classList.contains("ellipsis")) {
          answer.classList.remove("ellipsis");
          answer.classList.add("expanded");
          button.textContent = "Show Less";
      } else {
          answer.classList.remove("expanded");
          answer.classList.add("ellipsis");
          button.textContent = "Show More";
      }
  }
</script>

